{"ast":null,"code":"var _jsxFileName = \"/home/phil/dev/projects/soundclone/mod-5-audiofiles-frontend/src/components/App.js\";\n\n/*eslint-disable */\nimport React from \"react\";\nimport \"../App.css\";\nimport LoginForm from \"./LoginForm\";\nimport NewUserForm from \"./NewUserForm\";\nimport UserProfile from \"./UserProfile\";\nimport FeedContainer from \"./FeedContainer\";\nimport { connect } from \"react-redux\";\nimport { Router, Route, withRouter, Switch, Redirect } from \"react-router-dom\";\nimport { currentUser, logoutUser, fetchAllUsers, fetchAllSongs } from \"../actions\";\nimport { reducer } from \"../reducers\";\nimport NewSongForm from \"./NewSongForm\";\n\nclass App extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.handleLogout = e => {\n      localStorage.clear();\n      this.props.logoutUser();\n      this.props.history.push(\"/login\");\n    };\n\n    this.setAllFollowings = () => {\n      let followedsIDArray = [];\n      let followersIDArray = [];\n      let followedsArray = [];\n      let followersArray = [];\n      const userFollowings = this.props.allUsers.find(user => user.id === this.props.user.id);\n\n      if (userFollowings) {\n        followedsIDArray = userFollowings.active_relationships.map(rel => rel.followed_id);\n        followedsArray = followedsIDArray.map(followedsID => {\n          return this.props.allUsers.find(user => {\n            console.log(user.id, followedsID);\n            return user.id === followedsID;\n          });\n        });\n        followersIDArray = userFollowings.passive_relationships.map(rel => rel.follower_id);\n      } // debugger\n\n    };\n  }\n\n  // ! FOR TESTING OUT REDUX\n  // state = {\n  //   allFollowers: [],\n  //   allFolloweds: []\n  // }\n  componentDidMount() {\n    this.props.fetchAllSongs();\n    this.props.fetchAllUsers();\n    this.props.currentUser(); // this.props.fetchFollowing(this.props.user.id)\n  }\n\n  render() {\n    // console.log('app props: ', this.props)\n    // console.log(this.state)\n    this.setAllFollowings();\n    return React.createElement(\"div\", {\n      className: \"app-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(Route, {\n      path: \"/login\",\n      render: () => React.createElement(LoginForm, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/createaccount\",\n      render: () => React.createElement(NewUserForm, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }), React.createElement(Route // TODO Need to go to /profile/${displayUserId}\n    , {\n      path: \"/profile/:id\",\n      render: () => React.createElement(UserProfile, {\n        handleLogout: this.handleLogout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/feed\",\n      render: () => React.createElement(FeedContainer, {\n        allSongs: this.props.allSongs,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/newsong\",\n      render: () => React.createElement(NewSongForm, {\n        currentUser: this.props.user,\n        handleChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    user: state.user,\n    allUsers: state.allUsers\n  };\n};\n\nexport default connect(mapStateToProps, // mapDispatchToProps\n{\n  currentUser,\n  logoutUser,\n  fetchAllUsers,\n  fetchAllSongs\n})(withRouter(App));","map":{"version":3,"sources":["/home/phil/dev/projects/soundclone/mod-5-audiofiles-frontend/src/components/App.js"],"names":["React","LoginForm","NewUserForm","UserProfile","FeedContainer","connect","Router","Route","withRouter","Switch","Redirect","currentUser","logoutUser","fetchAllUsers","fetchAllSongs","reducer","NewSongForm","App","Component","handleLogout","e","localStorage","clear","props","history","push","setAllFollowings","followedsIDArray","followersIDArray","followedsArray","followersArray","userFollowings","allUsers","find","user","id","active_relationships","map","rel","followed_id","followedsID","console","log","passive_relationships","follower_id","componentDidMount","render","allSongs","handleChange","mapStateToProps","state"],"mappings":"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","sourcesContent":["/*eslint-disable */\nimport React from \"react\"\nimport \"../App.css\"\nimport LoginForm from \"./LoginForm\"\nimport NewUserForm from \"./NewUserForm\"\nimport UserProfile from \"./UserProfile\"\nimport FeedContainer from \"./FeedContainer\"\nimport { connect } from \"react-redux\"\nimport { Router, Route, withRouter, Switch, Redirect } from \"react-router-dom\"\nimport {\n  currentUser,\n  logoutUser,\n  fetchAllUsers,\n  fetchAllSongs\n} from \"../actions\"\nimport { reducer } from \"../reducers\"\nimport NewSongForm from \"./NewSongForm\"\n\nclass App extends React.Component {\n  // ! FOR TESTING OUT REDUX\n  // state = {\n  //   allFollowers: [],\n  //   allFolloweds: []\n  // }\n  componentDidMount() {\n    this.props.fetchAllSongs()\n    this.props.fetchAllUsers()\n    this.props.currentUser()\n    // this.props.fetchFollowing(this.props.user.id)\n  }\n\n  handleLogout = e => {\n    localStorage.clear()\n    this.props.logoutUser()\n    this.props.history.push(\"/login\")\n  }\n\n  setAllFollowings = () => {\n    let followedsIDArray = []\n    let followersIDArray = []\n    let followedsArray = []\n    let followersArray = []\n\n    const userFollowings = this.props.allUsers.find(\n      user => user.id === this.props.user.id\n    )\n    if (userFollowings) {\n      followedsIDArray = userFollowings.active_relationships.map(\n        rel => rel.followed_id\n      )\n      followedsArray = followedsIDArray.map(followedsID => {\n        return this.props.allUsers.find(user => {\n          console.log(user.id, followedsID)\n          return user.id === followedsID\n        })\n      })\n      followersIDArray = userFollowings.passive_relationships.map(\n        rel => rel.follower_id\n      )\n    }\n    // debugger\n  }\n\n  render() {\n    // console.log('app props: ', this.props)\n    // console.log(this.state)\n    this.setAllFollowings()\n    return (\n      <div className=\"app-container\">\n        {/* <Switch> */}\n        <Route path=\"/login\" render={() => <LoginForm />} />\n        <Route path=\"/createaccount\" render={() => <NewUserForm />} />\n        <Route\n          // TODO Need to go to /profile/${displayUserId}\n          path=\"/profile/:id\"\n          render={() => <UserProfile handleLogout={this.handleLogout} />}\n        />\n        <Route\n          path=\"/feed\"\n          render={() => <FeedContainer allSongs={this.props.allSongs} />}\n        />\n        <Route\n          path=\"/newsong\"\n          render={() => (\n            <NewSongForm\n              currentUser={this.props.user}\n              handleChange={this.handleChange}\n            />\n          )}\n        />\n        {/* </Switch> */}\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    user: state.user,\n    allUsers: state.allUsers\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  // mapDispatchToProps\n  { currentUser, logoutUser, fetchAllUsers, fetchAllSongs }\n)(withRouter(App))\n"]},"metadata":{},"sourceType":"module"}