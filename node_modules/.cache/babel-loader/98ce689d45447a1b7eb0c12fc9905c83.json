{"ast":null,"code":"/*eslint-disable */\n// ! All actions go in here\nconst fetchUsersUrl = \"http://localhost:3000/users\";\nconst fetchSongsUrl = \"http://localhost:3000/songs\";\nconst fetchCommentsUrl = \"http://localhost:3000/comments\";\nexport function loginUser(user) {\n  console.log(\"login\");\n  return {\n    type: \"LOGIN_USER\",\n    user\n  };\n}\nexport function logoutUser() {\n  console.log(\"logout\");\n  return {\n    type: \"LOGOUT_USER\"\n  };\n}\nexport function loginCurrentUser(formData, history) {\n  return dispatch => {\n    const reqObj = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(formData)\n    };\n    return fetch(\"http://localhost:3000/api/v1/auth\", reqObj).then(resp => resp.json()).then(data => {\n      if (data.error) {\n        console.log(data);\n      } else {\n        localStorage.token = data.jwt;\n        dispatch(loginUser(data.user));\n        console.log(data);\n        history.push(\"/profile/\".concat(data.user.id));\n      }\n    }).catch(err => console.log(err));\n  };\n}\nexport function currentUser() {\n  return dispatch => {\n    const token = localStorage.token;\n    const reqObj = {\n      method: \"GET\",\n      headers: {\n        Authorization: \"Bearer \".concat(token)\n      }\n    };\n    return fetch(\"http://localhost:3000/api/v1/current_user\", reqObj).then(res => res.json()).then(data => {\n      if (data.error) {\n        console.log(\"currentUser error: \", data);\n      } else {\n        dispatch(loginUser(data.user));\n      }\n    }).catch(err => console.log(err));\n  };\n}\nexport function setAllFolloweds(followeds) {\n  return {\n    type: \"SET_ALL_FOLLOWEDS\",\n    followeds\n  };\n}\nexport function setAllFollowers(followers) {\n  return {\n    type: \"SET_ALL_FOLLOWERS\",\n    followers\n  };\n}\nexport function registerUser(formData, history) {\n  return dispatch => {\n    const reqObj = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(formData)\n    };\n    return fetch(fetchUsersUrl, reqObj).then(resp => resp.json()).then(data => {\n      if (data.error) {\n        //handle Error\n        console.log(data.error);\n      } else {\n        localStorage.token = data.jwt;\n        dispatch(loginUser(data.user));\n        history.push(\"/profile/\".concat(data.user.id));\n      }\n    }).catch(err => console.log(err));\n  };\n}\nexport function setAllUsers(allUsers) {\n  return {\n    type: \"SET_ALL_USERS\",\n    allUsers\n  };\n}\nexport function fetchAllUsers() {\n  // TODO To fetch all the users from the database\n  return dispatch => {\n    return fetch(fetchUsersUrl).then(resp => resp.json()).then(data => {\n      // console.log(data)\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        dispatch(setAllUsers(data));\n      }\n    }).catch(err => console.log(err));\n  };\n}\nexport function setAllSongs(allSongs) {\n  return {\n    type: \"SET_ALL_SONGS\",\n    allSongs\n  };\n}\nexport function fetchAllSongs() {\n  // TODO To fetch all the songs from the database\n  return dispatch => {\n    return fetch(fetchSongsUrl).then(resp => resp.json()).then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        dispatch(setAllSongs(data));\n      }\n    }).catch(err => console.log(err));\n  };\n}\nexport function addNewSongToFeed(newSong) {\n  return {\n    type: \"ADD_SONG_TO_FEED\",\n    newSong\n  };\n}\nexport function postNewSong(formData, user_id, history) {\n  // TODO Send POST fetch request to activestorage with attached audio file\n  return dispatch => {\n    console.log(\"post da new song bruh\", formData);\n    const title = formData.title,\n          genre = formData.genre,\n          description = formData.description,\n          song_link = formData.song_link,\n          selectedTags = formData.selectedTags;\n    let songData = new FormData();\n    songData.append(\"song[song_link]\", song_link);\n    songData.append(\"song[title]\", title);\n    songData.append(\"song[genre]\", genre);\n    songData.append(\"song[description]\", description);\n    songData.append(\"song[user_id]\", user_id);\n    songData.append(\"tags[tags]\", selectedTags);\n    const reqObjPostSong = {\n      method: \"POST\",\n      headers: {\n        Accepts: \"application/json\"\n      },\n      body: songData\n    };\n    return fetch(fetchSongsUrl, reqObjPostSong).then(res => res.json()).then(data => {\n      if (data.error) {\n        console.log(\"error: \", data.error);\n      } else {\n        // TODO Redirect to the created song page\n        // console.log(\"success: \", data)\n        dispatch(addNewSongToFeed(data));\n        history.push(\"/songs/\".concat(data.song.id));\n      }\n    }).catch(err => console.log(err));\n  };\n} // ! Find Display User\n\nexport function setDisplayUser(displayUser) {\n  return {\n    type: \"SET_DISPLAY_USER\",\n    displayUser\n  };\n} // ? Using the HISTORY path to get user-id\n// ? send id through finduser func and set the store of display user to the result\n\nexport function findDisplayUser(allUsers, history) {\n  return dispatch => {\n    const displayUserID = Number(history.location.pathname.slice(9));\n    const displayUser = allUsers.find(u => {\n      return u.id === displayUserID;\n    });\n    dispatch(setDisplayUser(displayUser));\n  };\n} // ! Find Display Song\n\nexport function setDisplaySong(displaySong) {\n  return {\n    type: \"SET_DISPLAY_SONG\",\n    displaySong\n  };\n}\nexport function findDisplaySong(allSongs, history) {\n  console.log(\"finding da song\");\n  return dispatch => {\n    const displaySongID = Number(history.location.pathname.slice(7));\n    const displaySong = allSongs.find(song => {\n      return song.song.id === displaySongID;\n    }); // console.log(\"displaySong: \", displaySong)\n\n    dispatch(setDisplaySong(displaySong));\n  };\n} // ! GET All comments\n\nexport function setAllComments(allComments) {\n  return {\n    type: \"SET_ALL_COMMENTS\",\n    allComments\n  };\n}\nexport function fetchAllComments() {\n  return dispatch => {\n    return fetch(fetchCommentsUrl).then(res => res.json()).then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        console.log('fajhdgaskcgsdhacgdhscghsdgvcds', data);\n        dispatch(setAllComments(data));\n      }\n    }).catch(err => console.log(err));\n  };\n} // ! GET All display Comments\n\nexport function findDisplayComments(allComments, displaySong) {\n  return dispatch => {\n    console.log(\"finding da comments: \", displaySong.song.id, allComments); // ? Users the display song to filter through the allComments array with the matching song_id\n\n    const displayComments = allComments.filter(comment => {\n      // console.log('commcemcoem', comment)\n      return comment.song_id === displaySong.song.id;\n    }); // console.log(displayComments)\n\n    dispatch(setDisplayComments(displayComments));\n  };\n} // ! Show all display comments\n\nexport function setDisplayComments(displayComments) {\n  return {\n    type: \"SET_DISPLAY_COMMENTS\",\n    displayComments\n  };\n} // ! Add New Comment to displayComments Array in store\n\nexport function addNewComment(comment) {\n  return {\n    type: \"ADD_NEW_COMMENT\",\n    comment\n  };\n} // ! POST New Comment\n\nexport function postNewComment(content, user_id, song_id) {\n  return dispatch => {\n    // console.log('conttent: ', content, user_id, song_id)\n    const reqObj = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        content,\n        user_id,\n        song_id\n      })\n    };\n    return fetch(fetchCommentsUrl, reqObj).then(resp => resp.json()).then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        console.log(data);\n        dispatch(addNewComment(data));\n      }\n    }).catch(err => console.log(err));\n  };\n}","map":{"version":3,"sources":["/home/phil/dev/projects/soundclone/mod-5-audiofiles-frontend/src/actions/index.js"],"names":["fetchUsersUrl","fetchSongsUrl","fetchCommentsUrl","loginUser","user","console","log","type","logoutUser","loginCurrentUser","formData","history","dispatch","reqObj","method","headers","body","JSON","stringify","fetch","then","resp","json","data","error","localStorage","token","jwt","push","id","catch","err","currentUser","Authorization","res","setAllFolloweds","followeds","setAllFollowers","followers","registerUser","setAllUsers","allUsers","fetchAllUsers","setAllSongs","allSongs","fetchAllSongs","addNewSongToFeed","newSong","postNewSong","user_id","title","genre","description","song_link","selectedTags","songData","FormData","append","reqObjPostSong","Accepts","song","setDisplayUser","displayUser","findDisplayUser","displayUserID","Number","location","pathname","slice","find","u","setDisplaySong","displaySong","findDisplaySong","displaySongID","setAllComments","allComments","fetchAllComments","findDisplayComments","displayComments","filter","comment","song_id","setDisplayComments","addNewComment","postNewComment","content"],"mappings":"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","sourcesContent":["/*eslint-disable */\n// ! All actions go in here\nconst fetchUsersUrl = \"http://localhost:3000/users\"\nconst fetchSongsUrl = \"http://localhost:3000/songs\"\nconst fetchCommentsUrl = \"http://localhost:3000/comments\"\n\nexport function loginUser(user) {\n  console.log(\"login\")\n  return {\n    type: \"LOGIN_USER\",\n    user\n  }\n}\n\nexport function logoutUser() {\n  console.log(\"logout\")\n  return {\n    type: \"LOGOUT_USER\"\n  }\n}\n\nexport function loginCurrentUser(formData, history) {\n  return dispatch => {\n    const reqObj = {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(formData)\n    }\n    return fetch(\"http://localhost:3000/api/v1/auth\", reqObj)\n      .then(resp => resp.json())\n      .then(data => {\n        if (data.error) {\n          console.log(data)\n        } else {\n          localStorage.token = data.jwt\n          dispatch(loginUser(data.user))\n          console.log(data)\n          history.push(`/profile/${data.user.id}`)\n        }\n      })\n      .catch(err => console.log(err))\n  }\n}\n\nexport function currentUser() {\n  return dispatch => {\n    const token = localStorage.token\n    const reqObj = {\n      method: \"GET\",\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }\n    return fetch(\"http://localhost:3000/api/v1/current_user\", reqObj)\n      .then(res => res.json())\n      .then(data => {\n        if (data.error) {\n          console.log(\"currentUser error: \", data)\n        } else {\n          dispatch(loginUser(data.user))\n        }\n      })\n      .catch(err => console.log(err))\n  }\n}\n\nexport function setAllFolloweds(followeds) {\n  return {\n    type: \"SET_ALL_FOLLOWEDS\",\n    followeds\n  }\n}\n\nexport function setAllFollowers(followers) {\n  return {\n    type: \"SET_ALL_FOLLOWERS\",\n    followers\n  }\n}\n\nexport function registerUser(formData, history) {\n  return dispatch => {\n    const reqObj = {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(formData)\n    }\n    return fetch(fetchUsersUrl, reqObj)\n      .then(resp => resp.json())\n      .then(data => {\n        if (data.error) {\n          //handle Error\n          console.log(data.error)\n        } else {\n          localStorage.token = data.jwt\n          dispatch(loginUser(data.user))\n          history.push(`/profile/${data.user.id}`)\n        }\n      })\n      .catch(err => console.log(err))\n  }\n}\n\nexport function setAllUsers(allUsers) {\n  return {\n    type: \"SET_ALL_USERS\",\n    allUsers\n  }\n}\n\nexport function fetchAllUsers() {\n  // TODO To fetch all the users from the database\n  return dispatch => {\n    return fetch(fetchUsersUrl)\n      .then(resp => resp.json())\n      .then(data => {\n        // console.log(data)\n        if (data.error) {\n          console.log(data.error)\n        } else {\n          dispatch(setAllUsers(data))\n        }\n      })\n      .catch(err => console.log(err))\n  }\n}\n\nexport function setAllSongs(allSongs) {\n  return {\n    type: \"SET_ALL_SONGS\",\n    allSongs\n  }\n}\n\nexport function fetchAllSongs() {\n  // TODO To fetch all the songs from the database\n  return dispatch => {\n    return fetch(fetchSongsUrl)\n      .then(resp => resp.json())\n      .then(data => {\n        if (data.error) {\n          console.log(data.error)\n        } else {\n          dispatch(setAllSongs(data))\n        }\n      })\n      .catch(err => console.log(err))\n  }\n}\n\nexport function addNewSongToFeed(newSong) {\n  return {\n    type: \"ADD_SONG_TO_FEED\",\n    newSong\n  }\n}\n\nexport function postNewSong(formData, user_id, history) {\n  // TODO Send POST fetch request to activestorage with attached audio file\n  return dispatch => {\n    console.log(\"post da new song bruh\", formData)\n    const { title, genre, description, song_link, selectedTags } = formData\n    let songData = new FormData()\n    songData.append(\"song[song_link]\", song_link)\n    songData.append(\"song[title]\", title)\n    songData.append(\"song[genre]\", genre)\n    songData.append(\"song[description]\", description)\n    songData.append(\"song[user_id]\", user_id)\n    songData.append(\"tags[tags]\", selectedTags)\n    const reqObjPostSong = {\n      method: \"POST\",\n      headers: {\n        Accepts: \"application/json\"\n      },\n      body: songData\n    }\n    return fetch(fetchSongsUrl, reqObjPostSong)\n      .then(res => res.json())\n      .then(data => {\n        if (data.error) {\n          console.log(\"error: \", data.error)\n        } else {\n          // TODO Redirect to the created song page\n          // console.log(\"success: \", data)\n          dispatch(addNewSongToFeed(data))\n          history.push(`/songs/${data.song.id}`)\n        }\n      })\n      .catch(err => console.log(err))\n  }\n}\n\n// ! Find Display User\nexport function setDisplayUser(displayUser) {\n  return {\n    type: \"SET_DISPLAY_USER\",\n    displayUser\n  }\n}\n\n// ? Using the HISTORY path to get user-id\n// ? send id through finduser func and set the store of display user to the result\nexport function findDisplayUser(allUsers, history) {\n  return dispatch => {\n    const displayUserID = Number(history.location.pathname.slice(9))\n    const displayUser = allUsers.find(u => {\n      return u.id === displayUserID\n    })\n    dispatch(setDisplayUser(displayUser))\n  }\n}\n\n// ! Find Display Song\nexport function setDisplaySong(displaySong) {\n  return {\n    type: \"SET_DISPLAY_SONG\",\n    displaySong\n  }\n}\n\nexport function findDisplaySong(allSongs, history) {\n  console.log(\"finding da song\")\n  return dispatch => {\n    const displaySongID = Number(history.location.pathname.slice(7))\n    const displaySong = allSongs.find(song => {\n      return song.song.id === displaySongID\n    })\n    // console.log(\"displaySong: \", displaySong)\n    dispatch(setDisplaySong(displaySong))\n  }\n}\n\n// ! GET All comments\nexport function setAllComments(allComments) {\n  return {\n    type: \"SET_ALL_COMMENTS\",\n    allComments\n  }\n}\n\nexport function fetchAllComments() {\n  return dispatch => {\n    return fetch(fetchCommentsUrl)\n      .then(res => res.json())\n      .then(data => {\n        if (data.error) {\n          console.log(data.error)\n        } else {\n          console.log('fajhdgaskcgsdhacgdhscghsdgvcds', data)\n          dispatch(setAllComments(data))\n        }\n      })\n      .catch(err => console.log(err))\n  }\n}\n\n// ! GET All display Comments\nexport function findDisplayComments(allComments, displaySong) {\n  return dispatch => {\n    console.log(\"finding da comments: \", displaySong.song.id, allComments)\n    // ? Users the display song to filter through the allComments array with the matching song_id\n    const displayComments = allComments.filter(comment => {\n      // console.log('commcemcoem', comment)\n      return comment.song_id === displaySong.song.id\n    })\n    // console.log(displayComments)\n    dispatch(setDisplayComments(displayComments))\n  }\n}\n\n// ! Show all display comments\nexport function setDisplayComments(displayComments) {\n  return {\n    type: \"SET_DISPLAY_COMMENTS\",\n    displayComments\n  }\n}\n\n// ! Add New Comment to displayComments Array in store\nexport function addNewComment(comment) {\n  return {\n    type: \"ADD_NEW_COMMENT\",\n    comment\n  }\n}\n\n// ! POST New Comment\nexport function postNewComment(content, user_id, song_id) {\n  return dispatch => {\n    // console.log('conttent: ', content, user_id, song_id)\n    const reqObj = {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        content,\n        user_id,\n        song_id\n      })\n    }\n    return fetch(fetchCommentsUrl, reqObj)\n      .then(resp => resp.json())\n      .then(data => {\n        if (data.error) {\n          console.log(data.error)\n        } else {\n          console.log(data)\n          dispatch(addNewComment(data))\n        }\n      })\n      .catch(err => console.log(err))\n  }\n}\n"]},"metadata":{},"sourceType":"module"}