{"ast":null,"code":"var _jsxFileName = \"/home/phil/dev/projects/soundclone/mod-5-audiofiles-frontend/src/components/App.js\";\n\n/*eslint-disable */\nimport React from \"react\";\nimport \"../App.css\";\nimport LoginForm from \"./LoginForm\";\nimport NewUserForm from \"./NewUserForm\";\nimport UserProfile from \"./UserProfile\";\nimport FeedContainer from \"./FeedContainer\";\nimport { connect } from \"react-redux\";\nimport { Router, Route, withRouter, Switch, Redirect } from \"react-router-dom\";\nimport { currentUser, logoutUser, fetchAllUsers, fetchAllSongs } from \"../actions\";\nimport { reducer } from \"../reducers\";\nimport NewSongForm from \"./NewSongForm\";\n\nclass App extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.handleLogout = e => {\n      localStorage.clear();\n      this.props.logoutUser();\n      this.props.history.push(\"/login\");\n    };\n\n    this.setAllFollowings = () => {\n      let followedsIDArray = [];\n      let followersIDArray = [];\n      const userFollowings = this.props.allUsers.find(user => user.id === this.props.user.id);\n\n      if (userFollowings) {\n        followedsIDArray = userFollowings.active_relationships.map(rel => rel.followed_id);\n        followedsArray = followedsIDArray.map(followedsID => this.props.allUsers.find(user => user.id === followedsID));\n        followersIDArray = userFollowings.passive_relationships.map(rel => rel.follower_id);\n      }\n\n      debugger;\n    };\n  }\n\n  // ! FOR TESTING OUT REDUX\n  // state = {\n  //   allFollowers: [],\n  //   allFolloweds: []\n  // }\n  componentDidMount() {\n    this.props.fetchAllSongs();\n    this.props.fetchAllUsers();\n    this.props.currentUser(); // this.props.fetchFollowing(this.props.user.id)\n  }\n\n  render() {\n    // console.log('app props: ', this.props)\n    // console.log(this.state)\n    this.setAllFollowings();\n    return React.createElement(\"div\", {\n      className: \"app-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, React.createElement(Route, {\n      path: \"/login\",\n      render: () => React.createElement(LoginForm, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/createaccount\",\n      render: () => React.createElement(NewUserForm, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }), React.createElement(Route // TODO Need to go to /profile/${displayUserId} \n    , {\n      path: \"/profile/:id\",\n      render: () => React.createElement(UserProfile, {\n        handleLogout: this.handleLogout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/feed\",\n      render: () => React.createElement(FeedContainer, {\n        allSongs: this.props.allSongs,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/newsong\",\n      render: () => React.createElement(NewSongForm, {\n        currentUser: this.props.user,\n        handleChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    user: state.user,\n    allUsers: state.allUsers\n  };\n};\n\nexport default connect(mapStateToProps, // mapDispatchToProps\n{\n  currentUser,\n  logoutUser,\n  fetchAllUsers,\n  fetchAllSongs\n})(withRouter(App));","map":{"version":3,"sources":["/home/phil/dev/projects/soundclone/mod-5-audiofiles-frontend/src/components/App.js"],"names":["React","LoginForm","NewUserForm","UserProfile","FeedContainer","connect","Router","Route","withRouter","Switch","Redirect","currentUser","logoutUser","fetchAllUsers","fetchAllSongs","reducer","NewSongForm","App","Component","handleLogout","e","localStorage","clear","props","history","push","setAllFollowings","followedsIDArray","followersIDArray","userFollowings","allUsers","find","user","id","active_relationships","map","rel","followed_id","followedsArray","followedsID","passive_relationships","follower_id","componentDidMount","render","allSongs","handleChange","mapStateToProps","state"],"mappings":"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","sourcesContent":["/*eslint-disable */\nimport React from \"react\"\nimport \"../App.css\"\nimport LoginForm from \"./LoginForm\"\nimport NewUserForm from \"./NewUserForm\"\nimport UserProfile from \"./UserProfile\"\nimport FeedContainer from \"./FeedContainer\"\nimport { connect } from \"react-redux\"\nimport { Router, Route, withRouter, Switch, Redirect } from \"react-router-dom\"\nimport { currentUser, logoutUser, fetchAllUsers, fetchAllSongs } from \"../actions\"\nimport { reducer } from \"../reducers\"\nimport NewSongForm from \"./NewSongForm\"\n\nclass App extends React.Component {\n  // ! FOR TESTING OUT REDUX\n  // state = {\n  //   allFollowers: [],\n  //   allFolloweds: []\n  // }\n  componentDidMount() {\n    this.props.fetchAllSongs()\n    this.props.fetchAllUsers()\n    this.props.currentUser()\n    // this.props.fetchFollowing(this.props.user.id)\n  }\n  \n  handleLogout = e => {\n    localStorage.clear()\n    this.props.logoutUser()\n    this.props.history.push(\"/login\")\n  }\n\n  setAllFollowings = () => {\n    let followedsIDArray = []\n    let followersIDArray = []\n    const userFollowings = this.props.allUsers.find(user => user.id === this.props.user.id)\n    if (userFollowings) {\n      followedsIDArray = userFollowings.active_relationships.map(rel => rel.followed_id)\n      followedsArray = followedsIDArray.map(followedsID => this.props.allUsers.find(user => user.id === followedsID))\n      followersIDArray = userFollowings.passive_relationships.map(rel => rel.follower_id)\n    }\n    debugger\n  }\n\n  render() {\n    // console.log('app props: ', this.props)\n    // console.log(this.state)\n    this.setAllFollowings()\n    return (\n      <div className=\"app-container\">\n        {/* <Switch> */}\n        <Route path=\"/login\" render={() => <LoginForm />} />\n        <Route path=\"/createaccount\" render={() => <NewUserForm />} />\n        <Route\n          // TODO Need to go to /profile/${displayUserId} \n          path=\"/profile/:id\"\n          render={() => <UserProfile handleLogout={this.handleLogout} />}\n        />\n        <Route\n          path=\"/feed\"\n          render={() => <FeedContainer allSongs={this.props.allSongs}/>}\n        />\n        <Route \n          path='/newsong'\n          render={() => <NewSongForm currentUser={this.props.user} handleChange={this.handleChange}/>}\n        />\n        {/* </Switch> */}\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    user: state.user,\n    allUsers: state.allUsers\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  // mapDispatchToProps\n  {currentUser, logoutUser, fetchAllUsers, fetchAllSongs}\n)(withRouter(App))\n"]},"metadata":{},"sourceType":"module"}