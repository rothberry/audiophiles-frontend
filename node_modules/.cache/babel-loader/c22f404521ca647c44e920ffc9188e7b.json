{"ast":null,"code":"// ! All actions go in here\nconst fetchUsersUrl = \"http://localhost:3000/users\";\nconst fetchSongsUrl = \"http://localhost:3000/songs\";\nexport function loginUser(user) {\n  console.log(\"login\");\n  return {\n    type: \"LOGIN_USER\",\n    user\n  };\n}\nexport function logoutUser() {\n  console.log(\"logout\");\n  return {\n    type: \"LOGOUT_USER\"\n  };\n}\nexport function loginCurrentUser(formData, history) {\n  return dispatch => {\n    const reqObj = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(formData)\n    };\n    return fetch(\"http://localhost:3000/api/v1/auth\", reqObj).then(resp => resp.json()).then(data => {\n      if (data.error) {\n        console.log(data);\n      } else {\n        localStorage.token = data.jwt;\n        dispatch(loginUser(data.user));\n        console.log(data);\n        history.push(\"/profile/\".concat(data.user.id));\n      }\n    }).catch(err => console.log(err));\n  };\n}\nexport function currentUser(history) {\n  return dispatch => {\n    const token = localStorage.token;\n    const reqObj = {\n      method: \"GET\",\n      headers: {\n        // \"Content-Type\": \"application/json\",\n        // \"Accept\": \"application/json\",\n        Authorization: \"Bearer \".concat(token)\n      }\n    };\n    return fetch(\"http://localhost:3000/api/v1/current_user\", reqObj).then(res => res.json()).then(data => {\n      if (data.error) {\n        // Handle Error\n        console.log(\"currentUser error: \", data);\n      } else {\n        dispatch(loginUser(data.user));\n        fetchFollowing(data.user.id); // history.push(`/profile/${data.user.id}`)\n      }\n    }).catch(err => console.log(err));\n  };\n}\nexport function registerUser(formData, history) {\n  return dispatch => {\n    const reqObj = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(formData)\n    };\n    return fetch(fetchUsersUrl, reqObj).then(resp => resp.json()).then(data => {\n      if (data.error) {\n        //handle Error\n        console.log(data.error);\n      } else {\n        localStorage.token = data.jwt;\n        dispatch(loginUser(data.user));\n        history.push(\"/profile/\".concat(data.user.id));\n      }\n    }).catch(err => console.log(err));\n  };\n}\nexport function setAllUsers(allUsers) {\n  return {\n    type: \"SET_ALL_USERS\",\n    allUsers\n  };\n}\nexport function fetchAllUsers() {\n  // TODO To fetch all the users from the database\n  return dispatch => {\n    return fetch(fetchUsersUrl).then(resp => resp.json()).then(data => {\n      // console.log(data)\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        dispatch(setAllUsers(data));\n      }\n    }).catch(err => console.log(err));\n  };\n}\nexport function setAllSongs(allSongs) {\n  return {\n    type: \"SET_ALL_SONGS\",\n    allSongs\n  };\n}\nexport function fetchAllSongs() {\n  // TODO To fetch all the songs from the database\n  return dispatch => {\n    return fetch(fetchSongsUrl).then(resp => resp.json()).then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        dispatch(setAllSongs(data));\n      }\n    }).catch(err => console.log(err));\n  };\n}\nexport function setAllFolloweds(followeds) {\n  return {\n    type: \"SET_ALL_FOLLOWEDS\",\n    followeds\n  };\n}\nexport function setAllFollowers(followers) {\n  return {\n    type: \"SET_ALL_FOLLOWERS\",\n    followers\n  };\n}\nexport function fetchFollowing(currentUserID) {\n  return dispatch => {\n    return fetch(\"\".concat(fetchAllUsers, \"/\").concat(currentUserID)).then(resp => resp.json()).then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        console.log(data.followed);\n        console.log(data.follower);\n      }\n    });\n  };\n}\nexport function setCurrentSong(currentSong) {\n  return {\n    type: \"SET_CURRENT_SONG\",\n    currentSong\n  };\n}\nexport function postNewSong(formData, user_id, history) {\n  // TODO Send POST fetch request to activestorage with attached audio file\n  return dispatch => {\n    console.log(\"post da new song bruh\", formData);\n    const title = formData.title,\n          genre = formData.genre,\n          description = formData.description,\n          song_link = formData.song_link;\n    let songData = new FormData();\n    let songAudio = new FormData();\n    songAudio.append(\"song_link\", song_link);\n    songData.append(\"song[title]\", title);\n    songData.append(\"song[genre]\", genre);\n    songData.append(\"song[description]\", description);\n    songData.append(\"song[user_id]\", user_id); // const songData = {...this.state, song_link: newAudio, user_id: this.props.currentUser.id}\n\n    const reqObjPostSong = {\n      method: \"POST\",\n      headers: {\n        Accepts: \"application/json\"\n      },\n      body: songData\n    };\n    const reqObjPutBlob = {\n      method: \"PUT\",\n      headers: {\n        Accepts: \"application/json\" // Accepts: \"multipart/form-data\",\n        // \"Content-Type\": \"multipart/form-data\"\n\n      },\n      body: songAudio\n    };\n    return fetch(fetchSongsUrl, reqObjPostSong).then(res => res.json()).then(data => {\n      if (data.error) {\n        console.log(\"error: \", data.error);\n      } else {\n        // TODO Redirect to the created song page\n        console.log(\"success: \", data); // dispatch(setCurrentSong(data))\n\n        fetch(\"\".concat(fetchSongsUrl, \"/\").concat(data.id), reqObjPutBlob).then(res => res.json()).then(songBlob => {\n          console.log('songBlob: ', songBlob);\n        }); // history.push(`/songs/${data.id}`)\n      }\n    }).catch(err => console.log(err));\n  };\n}","map":{"version":3,"sources":["/home/phil/dev/projects/soundclone/mod-5-audiofiles-frontend/src/actions/index.js"],"names":["fetchUsersUrl","fetchSongsUrl","loginUser","user","console","log","type","logoutUser","loginCurrentUser","formData","history","dispatch","reqObj","method","headers","body","JSON","stringify","fetch","then","resp","json","data","error","localStorage","token","jwt","push","id","catch","err","currentUser","Authorization","res","fetchFollowing","registerUser","setAllUsers","allUsers","fetchAllUsers","setAllSongs","allSongs","fetchAllSongs","setAllFolloweds","followeds","setAllFollowers","followers","currentUserID","followed","follower","setCurrentSong","currentSong","postNewSong","user_id","title","genre","description","song_link","songData","FormData","songAudio","append","reqObjPostSong","Accepts","reqObjPutBlob","songBlob"],"mappings":"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","sourcesContent":["// ! All actions go in here\nconst fetchUsersUrl = \"http://localhost:3000/users\"\nconst fetchSongsUrl = \"http://localhost:3000/songs\"\n\nexport function loginUser(user) {\n  console.log(\"login\")\n  return {\n    type: \"LOGIN_USER\",\n    user\n  }\n}\n\nexport function logoutUser() {\n  console.log(\"logout\")\n  return {\n    type: \"LOGOUT_USER\"\n  }\n}\n\nexport function loginCurrentUser(formData, history) {\n  return dispatch => {\n    const reqObj = {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(formData)\n    }\n    return fetch(\"http://localhost:3000/api/v1/auth\", reqObj)\n      .then(resp => resp.json())\n      .then(data => {\n        if (data.error) {\n          console.log(data)\n        } else {\n          localStorage.token = data.jwt\n          dispatch(loginUser(data.user))\n          console.log(data)\n          history.push(`/profile/${data.user.id}`)\n        }\n      })\n      .catch(err => console.log(err))\n  }\n}\n\nexport function currentUser(history) {\n  return dispatch => {\n    const token = localStorage.token\n    const reqObj = {\n      method: \"GET\",\n      headers: {\n        // \"Content-Type\": \"application/json\",\n        // \"Accept\": \"application/json\",\n        Authorization: `Bearer ${token}`\n      }\n    }\n    return fetch(\"http://localhost:3000/api/v1/current_user\", reqObj)\n      .then(res => res.json())\n      .then(data => {\n        if (data.error) {\n          // Handle Error\n          console.log(\"currentUser error: \", data)\n        } else {\n          dispatch(loginUser(data.user))\n          fetchFollowing(data.user.id)\n          // history.push(`/profile/${data.user.id}`)\n        }\n      })\n      .catch(err => console.log(err))\n  }\n}\n\nexport function registerUser(formData, history) {\n  return dispatch => {\n    const reqObj = {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(formData)\n    }\n    return fetch(fetchUsersUrl, reqObj)\n      .then(resp => resp.json())\n      .then(data => {\n        if (data.error) {\n          //handle Error\n          console.log(data.error)\n        } else {\n          localStorage.token = data.jwt\n          dispatch(loginUser(data.user))\n          history.push(`/profile/${data.user.id}`)\n        }\n      })\n      .catch(err => console.log(err))\n  }\n}\n\nexport function setAllUsers(allUsers) {\n  return {\n    type: \"SET_ALL_USERS\",\n    allUsers\n  }\n}\n\nexport function fetchAllUsers() {\n  // TODO To fetch all the users from the database\n  return dispatch => {\n    return fetch(fetchUsersUrl)\n      .then(resp => resp.json())\n      .then(data => {\n        // console.log(data)\n        if (data.error) {\n          console.log(data.error)\n        } else {\n          dispatch(setAllUsers(data))\n        }\n      })\n      .catch(err => console.log(err))\n  }\n}\n\nexport function setAllSongs(allSongs) {\n  return {\n    type: \"SET_ALL_SONGS\",\n    allSongs\n  }\n}\n\nexport function fetchAllSongs() {\n  // TODO To fetch all the songs from the database\n  return dispatch => {\n    return fetch(fetchSongsUrl)\n      .then(resp => resp.json())\n      .then(data => {\n        if (data.error) {\n          console.log(data.error)\n        } else {\n          dispatch(setAllSongs(data))\n        }\n      })\n      .catch(err => console.log(err))\n  }\n}\n\nexport function setAllFolloweds(followeds) {\n  return {\n    type: \"SET_ALL_FOLLOWEDS\",\n    followeds\n  }\n}\n\nexport function setAllFollowers(followers) {\n  return {\n    type: \"SET_ALL_FOLLOWERS\",\n    followers\n  }\n}\n\nexport function fetchFollowing(currentUserID) {\n  return dispatch => {\n    return fetch(`${fetchAllUsers}/${currentUserID}`)\n    .then(resp => resp.json())\n    .then(data => {\n      if (data.error) {\n        console.log(data.error)\n      } else {\n        console.log(data.followed)\n        console.log(data.follower)\n      }\n    })\n  }\n}\n\nexport function setCurrentSong(currentSong) {\n  return {\n    type: \"SET_CURRENT_SONG\",\n    currentSong\n  }\n}\n\nexport function postNewSong(formData, user_id, history) {\n  // TODO Send POST fetch request to activestorage with attached audio file\n  return dispatch => {\n    console.log(\"post da new song bruh\", formData)\n    const { title, genre, description, song_link } = formData\n    let songData = new FormData()\n    let songAudio = new FormData()\n    songAudio.append(\"song_link\", song_link)\n    songData.append(\"song[title]\", title)\n    songData.append(\"song[genre]\", genre)\n    songData.append(\"song[description]\", description)\n    songData.append(\"song[user_id]\", user_id)\n    // const songData = {...this.state, song_link: newAudio, user_id: this.props.currentUser.id}\n    const reqObjPostSong = {\n      method: \"POST\",\n      headers: {\n        Accepts: \"application/json\"\n      },\n      body: songData\n    }\n    const reqObjPutBlob = {\n      method: \"PUT\",\n      headers: {\n        Accepts: \"application/json\"\n        // Accepts: \"multipart/form-data\",\n        // \"Content-Type\": \"multipart/form-data\"\n      },\n      body: songAudio\n    }\n\n    return fetch(fetchSongsUrl, reqObjPostSong)\n      .then(res => res.json())\n      .then(data => {\n        if (data.error) {\n          console.log(\"error: \", data.error)\n        } else {\n          // TODO Redirect to the created song page\n          console.log(\"success: \", data)\n          // dispatch(setCurrentSong(data))\n          fetch(`${fetchSongsUrl}/${data.id}`, reqObjPutBlob)\n          .then(res => res.json())\n          .then(songBlob => {\n            console.log('songBlob: ', songBlob)\n          })\n          // history.push(`/songs/${data.id}`)\n        }\n      })\n      .catch(err => console.log(err))\n  }\n}\n"]},"metadata":{},"sourceType":"module"}