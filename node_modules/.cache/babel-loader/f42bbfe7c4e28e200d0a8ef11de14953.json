{"ast":null,"code":"// ! All actions go in here\nexport function loginUser(user) {\n  console.log('login');\n  return {\n    type: 'LOGIN_USER',\n    user\n  };\n}\nexport function logoutUser() {\n  console.log('logout');\n  return {\n    type: 'LOGOUT_USER'\n  };\n}\nexport function currentUser(history) {\n  return dispatch => {\n    const token = localStorage.token;\n    const reqObj = {\n      method: \"GET\",\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': \"Bearer \".concat(token)\n      }\n    };\n    return fetch('http://localhost:3000/api/v1/current_user', reqObj).then(res => res.json()).then(data => {\n      if (data.error) {// Handle Error\n      } else {\n        dispatch(loginUser(data.user));\n        history.push('/profile');\n      }\n    });\n  };\n}\nexport function registerUser(formData, history) {\n  return dispatch => {\n    const reqObj = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(formData)\n    };\n    return fetch('http://localhost:3000/users', reqObj).then(resp => resp.json()).then(data => {\n      if (data.error) {//handle Erro\n      } else {\n        localStorage.token = data.token;\n        dispatch(loginUser(data.user));\n        history.push('/profile');\n      }\n    });\n  };\n}","map":{"version":3,"sources":["/home/phil/dev/projects/soundclone/mod-5-audiofiles-frontend/src/actions/index.js"],"names":["loginUser","user","console","log","type","logoutUser","currentUser","history","dispatch","token","localStorage","reqObj","method","headers","fetch","then","res","json","data","error","push","registerUser","formData","body","JSON","stringify","resp"],"mappings":"AAAA;AAEA,OAAO,SAASA,SAAT,CAAmBC,IAAnB,EAAwB;AAC7BC,EAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACA,SAAO;AACLC,IAAAA,IAAI,EAAE,YADD;AAELH,IAAAA;AAFK,GAAP;AAID;AAED,OAAO,SAASI,UAAT,GAAqB;AAC1BH,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACA,SAAO;AACLC,IAAAA,IAAI,EAAE;AADD,GAAP;AAGD;AAED,OAAO,SAASE,WAAT,CAAqBC,OAArB,EAA8B;AACnC,SAAQC,QAAD,IAAc;AACnB,UAAMC,KAAK,GAAGC,YAAY,CAACD,KAA3B;AACA,UAAME,MAAM,GAAG;AACbC,MAAAA,MAAM,EAAE,KADK;AAEbC,MAAAA,OAAO,EAAE;AACP,wBAAgB,kBADT;AAEP,0CAA2BJ,KAA3B;AAFO;AAFI,KAAf;AAQA,WAAOK,KAAK,CAAC,2CAAD,EAA8CH,MAA9C,CAAL,CACNI,IADM,CACDC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADN,EAENF,IAFM,CAEDG,IAAI,IAAI;AACZ,UAAIA,IAAI,CAACC,KAAT,EAAgB,CACd;AACD,OAFD,MAEO;AACLX,QAAAA,QAAQ,CAACR,SAAS,CAACkB,IAAI,CAACjB,IAAN,CAAV,CAAR;AACAM,QAAAA,OAAO,CAACa,IAAR,CAAa,UAAb;AACD;AACF,KATM,CAAP;AAUD,GApBD;AAqBD;AAED,OAAO,SAASC,YAAT,CAAsBC,QAAtB,EAAgCf,OAAhC,EAAyC;AAC9C,SAAQC,QAAD,IAAc;AACnB,UAAMG,MAAM,GAAG;AACbC,MAAAA,MAAM,EAAE,MADK;AAEbC,MAAAA,OAAO,EAAE;AAAC,wBAAgB;AAAjB,OAFI;AAGbU,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeH,QAAf;AAHO,KAAf;AAMA,WAAOR,KAAK,CAAC,6BAAD,EAAgCH,MAAhC,CAAL,CACJI,IADI,CACCW,IAAI,IAAIA,IAAI,CAACT,IAAL,EADT,EAEJF,IAFI,CAECG,IAAI,IAAI;AACZ,UAAIA,IAAI,CAACC,KAAT,EAAe,CACb;AACD,OAFD,MAEO;AACLT,QAAAA,YAAY,CAACD,KAAb,GAAqBS,IAAI,CAACT,KAA1B;AACAD,QAAAA,QAAQ,CAACR,SAAS,CAACkB,IAAI,CAACjB,IAAN,CAAV,CAAR;AACAM,QAAAA,OAAO,CAACa,IAAR,CAAa,UAAb;AACD;AACF,KAVI,CAAP;AAWD,GAlBD;AAmBD","sourcesContent":["// ! All actions go in here\n\nexport function loginUser(user){\n  console.log('login')\n  return {\n    type: 'LOGIN_USER',\n    user\n  }\n}\n\nexport function logoutUser(){\n  console.log('logout')\n  return {\n    type: 'LOGOUT_USER'\n  }\n}\n\nexport function currentUser(history) {\n  return (dispatch) => {\n    const token = localStorage.token\n    const reqObj = {\n      method: \"GET\",\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n      }\n    }\n    \n    return fetch('http://localhost:3000/api/v1/current_user', reqObj)\n    .then(res => res.json())\n    .then(data => {\n      if (data.error) {\n        // Handle Error\n      } else {\n        dispatch(loginUser(data.user))\n        history.push('/profile')\n      }\n    })\n  }\n}\n\nexport function registerUser(formData, history) {\n  return (dispatch) => {\n    const reqObj = {\n      method: 'POST',\n      headers: {'Content-Type': 'application/json'},\n      body: JSON.stringify(formData)\n    }\n\n    return fetch('http://localhost:3000/users', reqObj)\n      .then(resp => resp.json())\n      .then(data => {\n        if (data.error){\n          //handle Erro\n        } else {\n          localStorage.token = data.token\n          dispatch(loginUser(data.user))\n          history.push('/profile')\n        }\n      })\n  }\n}"]},"metadata":{},"sourceType":"module"}