{"ast":null,"code":"// ! All actions go in here\nexport function loginUser(user) {\n  console.log(\"login\"); // return {\n  //   type: \"LOGIN_USER\",\n  //   user\n  // }\n\n  return dispatch => {\n    const reqObj = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(formData)\n    };\n    return fetch(\"http://localhost:3000/api/v1/auth\", reqObj).then(resp => resp.json()).then(data => {\n      if (data.error) {\n        //handle Error\n        console.log(data.error);\n      } else {\n        localStorage.token = data.token;\n        dispatch(loginUser(data.user));\n        history.push(\"/profile\");\n      }\n    });\n  };\n}\nexport function logoutUser() {\n  console.log(\"logout\");\n  return {\n    type: \"LOGOUT_USER\"\n  };\n}\nexport function currentUser(history) {\n  console.log('hit currentUser');\n  return dispatch => {\n    const token = localStorage.token;\n    const reqObj = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \".concat(token)\n      }\n    };\n    return fetch(\"http://localhost:3000/api/v1/current_user\", reqObj).then(res => res.json()).then(data => {\n      if (data.error) {\n        // Handle Error\n        console.log(data.error);\n      } else {\n        dispatch(loginUser(data.user));\n        history.push(\"/profile\");\n      }\n    });\n  };\n}\nexport function registerUser(formData, history) {\n  return dispatch => {\n    const reqObj = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(formData)\n    };\n    return fetch(\"http://localhost:3000/users\", reqObj).then(resp => resp.json()).then(data => {\n      if (data.error) {\n        //handle Error\n        console.log(data.error);\n      } else {\n        localStorage.token = data.token;\n        dispatch(loginUser(data.user));\n        history.push(\"/profile\");\n      }\n    });\n  };\n}","map":{"version":3,"sources":["/home/phil/dev/projects/soundclone/mod-5-audiofiles-frontend/src/actions/index.js"],"names":["loginUser","user","console","log","dispatch","reqObj","method","headers","body","JSON","stringify","formData","fetch","then","resp","json","data","error","localStorage","token","history","push","logoutUser","type","currentUser","Authorization","res","registerUser"],"mappings":"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","sourcesContent":["// ! All actions go in here\n\nexport function loginUser(user) {\n  console.log(\"login\")\n  // return {\n  //   type: \"LOGIN_USER\",\n  //   user\n  // }\n  return dispatch => {\n    const reqObj = {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(formData)\n    }\n\n    return fetch(\"http://localhost:3000/api/v1/auth\", reqObj)\n      .then(resp => resp.json())\n      .then(data => {\n        if (data.error) {\n          //handle Error\n          console.log(data.error)\n        } else {\n          localStorage.token = data.token\n          dispatch(loginUser(data.user))\n          history.push(\"/profile\")\n        }\n      })\n  }\n}\n\nexport function logoutUser() {\n  console.log(\"logout\")\n  return {\n    type: \"LOGOUT_USER\"\n  }\n}\n\nexport function currentUser(history) {\n  console.log('hit currentUser')\n  return dispatch => {\n    const token = localStorage.token\n    const reqObj = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`\n      }\n    }\n\n    return fetch(\"http://localhost:3000/api/v1/current_user\", reqObj)\n      .then(res => res.json())\n      .then(data => {\n        if (data.error) {\n          // Handle Error\n          console.log(data.error)\n        } else {\n          dispatch(loginUser(data.user))\n          history.push(\"/profile\")\n        }\n      })\n  }\n}\n\nexport function registerUser(formData, history) {\n  return dispatch => {\n    const reqObj = {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(formData)\n    }\n\n    return fetch(\"http://localhost:3000/users\", reqObj)\n      .then(resp => resp.json())\n      .then(data => {\n        if (data.error) {\n          //handle Error\n          console.log(data.error)\n        } else {\n          localStorage.token = data.token\n          dispatch(loginUser(data.user))\n          history.push(\"/profile\")\n        }\n      })\n  }\n}\n"]},"metadata":{},"sourceType":"module"}