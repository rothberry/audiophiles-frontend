{"ast":null,"code":"/*eslint-disable */\n// ! All actions go in here\nconst fetchUsersUrl = \"http://localhost:3000/users\";\nconst fetchSongsUrl = \"http://localhost:3000/songs\";\nconst fetchCommentsUrl = \"http://localhost:3000/comments\";\nconst fetchTagsUrl = \"http://localhost:3000/tags\";\nconst fetchFollowingsUrl = \"http://localhost:3000/followings\";\nimport { Modal } from \"semantic-ui-react\";\nexport function loginUser(user) {\n  console.log(\"login\");\n  return {\n    type: \"LOGIN_USER\",\n    user\n  };\n}\nexport function logoutUser() {\n  console.log(\"logout\");\n  return {\n    type: \"LOGOUT_USER\"\n  };\n} // ! Log's in user and issues token\n\nexport function loginCurrentUser(formData, history) {\n  return dispatch => {\n    const reqObj = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(formData)\n    };\n    return fetch(\"http://localhost:3000/api/v1/auth\", reqObj).then(resp => resp.json()).then(data => {\n      if (data.error) {\n        alert(data.error);\n      } else {\n        localStorage.token = data.jwt;\n        dispatch(loginUser(data.user));\n        dispatch(isCurrentUser(true));\n        console.log(data);\n        history.push(\"/profile/\".concat(data.user.id));\n      }\n    }).catch(err => console.log(err));\n  };\n} // ! Finds the current user using token\n\nexport function currentUser() {\n  return dispatch => {\n    const token = localStorage.token;\n    const reqObj = {\n      method: \"GET\",\n      headers: {\n        Authorization: \"Bearer \".concat(token)\n      }\n    };\n    return fetch(\"http://localhost:3000/api/v1/current_user\", reqObj).then(res => res.json()).then(data => {\n      if (data.error) {\n        console.log(\"currentUser error: \", data);\n      } else {\n        dispatch(loginUser(data.user));\n      }\n    }).catch(err => console.log(err));\n  };\n}\nexport function addNewUser(newUser) {\n  return {\n    type: \"ADD_NEW_USER\",\n    newUser\n  };\n} // ! Creates a new User\n\nexport function registerUser(formData, history) {\n  return dispatch => {\n    const reqObj = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(formData)\n    };\n    return fetch(fetchUsersUrl, reqObj).then(resp => resp.json()).then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        localStorage.token = data.jwt;\n        dispatch(loginUser(data.user));\n        dispatch(addNewUser(data.user));\n        dispatch(setDisplayUser(data.user));\n        history.push(\"/profile/\".concat(data.user.id)); // ! Quick fix\n        // history.push(`/feed`)\n      }\n    }).catch(err => console.log(err));\n  };\n}\nexport function updateUser(user) {\n  return {\n    type: \"UPDATE_USER\",\n    user\n  };\n} // ! Updates CurrentUser\n\nexport function updateCurrentUser(user, formData, history) {\n  return dispatch => {\n    const token = localStorage.token;\n    const fetchUpdateUserUrl = fetchUsersUrl + \"/\" + user.id;\n    const reqUpdObj = {\n      method: \"PATCH\",\n      headers: {\n        \"Content-type\": \"application/json\",\n        Accepts: \"application/json\",\n        Authorization: \"Bearer \".concat(token)\n      },\n      body: JSON.stringify(formData)\n    };\n    console.log(formData);\n    const result = confirm(\"Are you sure you want to edit?\");\n\n    if (result) {\n      return fetch(fetchUpdateUserUrl, reqUpdObj).then(res => res.json()).then(user => {\n        console.log(user);\n\n        if (!user.error) {\n          dispatch(updateUser(user));\n          history.push(\"/profile/\".concat(user.id));\n        } else {\n          alert(\"Invalid Shiz\");\n        }\n      });\n    }\n  };\n} // ! Get and Set all USERS\n\nexport function setAllUsers(allUsers) {\n  return {\n    type: \"SET_ALL_USERS\",\n    allUsers\n  };\n}\nexport function fetchAllUsers() {\n  return dispatch => {\n    return fetch(fetchUsersUrl).then(resp => resp.json()).then(data => {\n      // console.log(data)\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        dispatch(setAllUsers(data));\n      }\n    }).catch(err => console.log(err));\n  };\n} // ! Get and Set all SONGS\n\nexport function setAllSongs(allSongs) {\n  return {\n    type: \"SET_ALL_SONGS\",\n    allSongs\n  };\n}\nexport function fetchAllSongs() {\n  return dispatch => {\n    return fetch(fetchSongsUrl).then(resp => resp.json()).then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        dispatch(setAllSongs(data));\n      }\n    }).catch(err => console.log(err));\n  };\n} // ! Adds new song to allSongs Array\n\nexport function addNewSongToFeed(newSong) {\n  return {\n    type: \"ADD_SONG_TO_FEED\",\n    newSong\n  };\n} // ! POST New Song\n\nexport function postNewSong(formData, user_id, history) {\n  return dispatch => {\n    console.log(\"post da new song bruh\", formData);\n    const title = formData.title,\n          genre = formData.genre,\n          description = formData.description,\n          song_link = formData.song_link,\n          selectedTags = formData.selectedTags;\n    let songData = new FormData();\n    songData.append(\"song[song_link]\", song_link);\n    songData.append(\"song[title]\", title);\n    songData.append(\"song[genre]\", genre);\n    songData.append(\"song[description]\", description);\n    songData.append(\"song[user_id]\", user_id);\n    songData.append(\"tags[tags]\", selectedTags);\n    const reqObjPostSong = {\n      method: \"POST\",\n      headers: {\n        Accepts: \"application/json\"\n      },\n      body: songData\n    };\n    return fetch(fetchSongsUrl, reqObjPostSong).then(res => res.json()).then(data => {\n      if (data.error) {\n        console.log(\"error: \", data.error);\n      } else {\n        dispatch(addNewSongToFeed(data));\n        dispatch(setDisplaySong(data));\n        history.push(\"/songs/\".concat(data.song.id));\n      }\n    }).catch(err => console.log(err));\n  };\n} // ! Find and Set Display User\n\nexport function setDisplayUser(displayUser) {\n  return {\n    type: \"SET_DISPLAY_USER\",\n    displayUser\n  };\n}\nexport function findDisplayUser(allUsers, history) {\n  return dispatch => {\n    const displayUserID = Number(history.location.pathname.slice(9));\n    const displayUser = allUsers.find(u => {\n      return u.id === displayUserID;\n    });\n    dispatch(setDisplayUser(displayUser));\n  };\n}\nexport function findDisplayUserThroughSong(allUsers, displaySong) {\n  return dispatch => {\n    const displayUserID = Number(displaySong.song.user.id);\n    const displayUser = allUsers.find(u => {\n      return u.id === displayUserID;\n    });\n    dispatch(setDisplayUser(displayUser));\n  };\n} // ! Find and Set Display Song\n\nexport function setDisplaySong(displaySong) {\n  return {\n    type: \"SET_DISPLAY_SONG\",\n    displaySong\n  };\n}\nexport function findDisplaySong(allSongs, history) {\n  return dispatch => {\n    const displaySongID = Number(history.location.pathname.slice(7));\n    const displaySong = allSongs.find(song => {\n      return song.song.id === displaySongID;\n    }); // console.log(\"displaySong: \", displaySong)\n\n    dispatch(setDisplaySong(displaySong));\n  };\n} // ! Set All comments\n\nexport function setAllComments(allComments) {\n  return {\n    type: \"SET_ALL_COMMENTS\",\n    allComments\n  };\n} // ! GET fetchs all Comments\n\nexport function fetchAllComments() {\n  return dispatch => {\n    return fetch(fetchCommentsUrl).then(res => res.json()).then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        dispatch(setAllComments(data));\n      }\n    }).catch(err => console.log(err));\n  };\n} // ! GET All display Comments\n\nexport function findDisplayComments(allComments, displaySong) {\n  return dispatch => {\n    const displayComments = allComments.filter(comment => {\n      return comment.song_id === displaySong.song.id;\n    });\n    dispatch(setDisplayComments(displayComments));\n  };\n} // ! Set all display comments\n\nexport function setDisplayComments(displayComments) {\n  return {\n    type: \"SET_DISPLAY_COMMENTS\",\n    displayComments\n  };\n} // ! Add New Comment to displayComments Array in store\n\nexport function addNewComment(comment) {\n  return {\n    type: \"ADD_NEW_COMMENT\",\n    comment\n  };\n} // ! POST New Comment\n\nexport function postNewComment(content, user_id, song_id) {\n  return dispatch => {\n    const reqObj = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        content,\n        user_id,\n        song_id\n      })\n    };\n    return fetch(fetchCommentsUrl, reqObj).then(resp => resp.json()).then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        console.log(data);\n        dispatch(addNewComment(data));\n      }\n    }).catch(err => console.log(err));\n  };\n}\nexport function deleteComment(comment_id) {\n  return {\n    type: \"DELETE_COMMENT\",\n    comment_id\n  };\n} // ! Delete Comment\n\nexport function deleteCommentFromBackend(comment_id) {\n  return dispatch => {\n    const reqDelObj = {\n      method: \"DELETE\"\n    };\n    let result = confirm(\"Do you want to delete this comment?\");\n\n    if (result) {\n      return fetch(\"\".concat(fetchCommentsUrl, \"/\").concat(comment_id), reqDelObj).then(res => res.json()).then(data => {\n        console.log(data);\n\n        if (data.error) {// handle error\n        } else {\n          alert(data.message);\n          dispatch(deleteComment(comment_id));\n        }\n      }).catch(err => console.log(err));\n    }\n  };\n} // ! SET all Tags\n\nexport function setAllTags(allTags) {\n  return {\n    type: \"SET_ALL_TAGS\",\n    allTags\n  };\n} // ! GET all Tags\n\nexport function fetchAllTags() {\n  return dispatch => {\n    return fetch(fetchTagsUrl).then(res => res.json()).then(data => {\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        dispatch(setAllTags(data));\n      }\n    }).catch(err => console.log(err));\n  };\n} // ? Some sort of filter songs by tag?\n// ! Goes to userProfile\n\nexport function goToUserProfile(user_id, history) {\n  return dispatch => {\n    return history.push(\"/profile/\".concat(user_id));\n  };\n} // ! Sets all passive relationships\n\nexport function createFollowersArray(allUsers, currentUser) {\n  return dispatch => {\n    let followersIDArray = [];\n    let followersArray = []; // console.log(allUsers, currentUser)\n\n    if (!!currentUser.passive_relationships) {\n      followersIDArray = currentUser.passive_relationships.map(rel => rel.follower_id);\n      followersArray = followersIDArray.map(followersID => {\n        return allUsers.find(user => {\n          return user.id === followersID;\n        });\n      });\n      console.log(\"followers: \", followersIDArray, followersArray);\n      dispatch(setAllFollowers(followersArray));\n    }\n  };\n}\nexport function setAllFollowers(followers) {\n  return {\n    type: \"SET_ALL_FOLLOWERS\",\n    followers\n  };\n} // ! Sets all active relationships\n\nexport function createFollowedsArray(allUsers, currentUser) {\n  return dispatch => {\n    let followedsIDArray = [];\n    let followedsArray = [];\n\n    if (!!currentUser.passive_relationships) {\n      followedsIDArray = currentUser.active_relationships.map(rel => rel.followed_id);\n      followedsArray = followedsIDArray.map(followedsID => {\n        return allUsers.find(user => {\n          return user.id === followedsID;\n        });\n      });\n      console.log(\"followed: \", followedsIDArray, followedsArray);\n      dispatch(setAllFolloweds(followedsArray));\n    }\n  };\n} // ! Sets all following relationships\n\nexport function setAllFolloweds(followeds) {\n  return {\n    type: \"SET_ALL_FOLLOWEDS\",\n    followeds\n  };\n} // ! Add new relationship to array\n\nexport function addFollowedUser() {} // ! Should update the followeds array in the store\n\nexport function followUser(followed, follower_id) {\n  return dispatch => {\n    const token = localStorage.token;\n    const reqPostObj = {\n      method: \"POST\",\n      headers: {\n        \"Content-type\": \"application/json\",\n        Accepts: \"application/json\",\n        Authorization: \"Bearer \".concat(token)\n      },\n      body: JSON.stringify({\n        follower_id: follower_id,\n        followed_id: followed.id\n      })\n    };\n    return fetch(fetchFollowingsUrl, reqPostObj).then(res => res.json()).then(data => {\n      console.log(data);\n\n      if (data.error) {// console.log(data.error)\n      } else {\n        alert(\"You've followed \".concat(followed.username)); // dispatch(addFollowedUser(data))\n      }\n    }).catch(err => console.log(err));\n  };\n} // ! Remove active relationship\n\nexport function unfollowUser(relationship_id, displayUser) {\n  return dispatch => {\n    const token = localStorage.token;\n    const reqDelObj = {\n      method: \"DELETE\",\n      headers: {\n        Authorization: \"Bearer \".concat(token)\n      }\n    };\n    let result = confirm(\"Are you sure you want to unfollow \".concat(displayUser.username, \"?\"));\n\n    if (result) {\n      return fetch(\"\".concat(fetchFollowingsUrl, \"/\").concat(relationship_id), reqDelObj).then(res => res.json()).then(data => {\n        if (!data.error) {\n          dispatch(removeFollowedUser());\n        }\n      }).catch(err => console.log(err));\n    }\n  };\n}\nexport function removeFollowedUser() {}\nexport function currentRelationship(relationship) {\n  return {\n    type: \"CURRENT_RELATIONSHIP\",\n    relationship\n  };\n}\nexport function isCurrentUser(isCurrentUser) {\n  return {\n    type: \"IS_CURRENT_USER\",\n    isCurrentUser\n  };\n}\nexport function setCurrentUser(displayUser, user) {\n  return dispatch => {\n    const userCheck = displayUser.id === user.id;\n\n    if (userCheck) {\n      dispatch(isCurrentUser(true));\n    } else {\n      dispatch(isCurrentUser(false));\n    }\n  };\n} // ! DELETE Song\n\nexport function removeSong(song_id) {\n  return {\n    type: \"REMOVE_SONG_FROM_FEED\",\n    song_id\n  };\n}\nexport function deleteSong(song_id, history) {\n  return dispatch => {\n    const reqDelObj = {\n      method: \"DELETE\"\n    };\n    let result = confirm(\"Do you want to delete this song?\");\n\n    if (result) {\n      return fetch(\"\".concat(fetchSongsUrl, \"/\").concat(song_id), reqDelObj).then(res => res.json()).then(data => {\n        console.log(data);\n\n        if (data.error) {// handle error\n        } else {\n          alert(data.message);\n          dispatch(removeSong(song_id));\n          history.push(\"/feed\");\n        }\n      }).catch(err => console.log(err));\n    }\n  };\n} // ! DELETE User\n\nexport function removeUser(user_id) {\n  return {\n    type: \"REMOVE_USER\",\n    user_id\n  };\n}\nexport function deleteUser(user_id, history) {\n  return dispatch => {\n    const token = localStorage.token;\n    const reqDelObj = {\n      method: \"DELETE\",\n      headers: {\n        \"Authorization\": \"Bearer \".concat(token)\n      }\n    };\n    let result = confirm(\"Are you sure you want to delete your account??\");\n\n    if (result) {\n      return fetch(\"\".concat(fetchUsersUrl, \"/\").concat(user_id), reqDelObj).then(res => res.json()).then(data => {\n        console.log(data);\n\n        if (data.error) {\n          // handle error\n          alert(data.error);\n        } else {\n          alert(data.message);\n          dispatch(removeUser(user_id));\n          history.push(\"/login\");\n        }\n      }).catch(err => console.log(err));\n    }\n  };\n}","map":{"version":3,"sources":["/home/phil/dev/projects/soundclone/mod-5-audiofiles-frontend/src/actions/index.js"],"names":["fetchUsersUrl","fetchSongsUrl","fetchCommentsUrl","fetchTagsUrl","fetchFollowingsUrl","Modal","loginUser","user","console","log","type","logoutUser","loginCurrentUser","formData","history","dispatch","reqObj","method","headers","body","JSON","stringify","fetch","then","resp","json","data","error","alert","localStorage","token","jwt","isCurrentUser","push","id","catch","err","currentUser","Authorization","res","addNewUser","newUser","registerUser","setDisplayUser","updateUser","updateCurrentUser","fetchUpdateUserUrl","reqUpdObj","Accepts","result","confirm","setAllUsers","allUsers","fetchAllUsers","setAllSongs","allSongs","fetchAllSongs","addNewSongToFeed","newSong","postNewSong","user_id","title","genre","description","song_link","selectedTags","songData","FormData","append","reqObjPostSong","setDisplaySong","song","displayUser","findDisplayUser","displayUserID","Number","location","pathname","slice","find","u","findDisplayUserThroughSong","displaySong","findDisplaySong","displaySongID","setAllComments","allComments","fetchAllComments","findDisplayComments","displayComments","filter","comment","song_id","setDisplayComments","addNewComment","postNewComment","content","deleteComment","comment_id","deleteCommentFromBackend","reqDelObj","message","setAllTags","allTags","fetchAllTags","goToUserProfile","createFollowersArray","followersIDArray","followersArray","passive_relationships","map","rel","follower_id","followersID","setAllFollowers","followers","createFollowedsArray","followedsIDArray","followedsArray","active_relationships","followed_id","followedsID","setAllFolloweds","followeds","addFollowedUser","followUser","followed","reqPostObj","username","unfollowUser","relationship_id","removeFollowedUser","currentRelationship","relationship","setCurrentUser","userCheck","removeSong","deleteSong","removeUser","deleteUser"],"mappings":"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","sourcesContent":["/*eslint-disable */\n// ! All actions go in here\nconst fetchUsersUrl = \"http://localhost:3000/users\"\nconst fetchSongsUrl = \"http://localhost:3000/songs\"\nconst fetchCommentsUrl = \"http://localhost:3000/comments\"\nconst fetchTagsUrl = \"http://localhost:3000/tags\"\nconst fetchFollowingsUrl = \"http://localhost:3000/followings\"\nimport { Modal } from \"semantic-ui-react\"\n\n\nexport function loginUser(user) {\n  console.log(\"login\")\n  return {\n    type: \"LOGIN_USER\",\n    user\n  }\n}\n\nexport function logoutUser() {\n  console.log(\"logout\")\n  return {\n    type: \"LOGOUT_USER\"\n  }\n}\n\n// ! Log's in user and issues token\nexport function loginCurrentUser(formData, history) {\n  return dispatch => {\n    const reqObj = {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(formData)\n    }\n    return fetch(\"http://localhost:3000/api/v1/auth\", reqObj)\n      .then(resp => resp.json())\n      .then(data => {\n        if (data.error) {\n          alert(data.error)\n        } else {\n          localStorage.token = data.jwt\n          dispatch(loginUser(data.user))\n          dispatch(isCurrentUser(true))\n          console.log(data)\n          history.push(`/profile/${data.user.id}`)\n        }\n      })\n      .catch(err => console.log(err))\n  }\n}\n\n// ! Finds the current user using token\nexport function currentUser() {\n  return dispatch => {\n    const token = localStorage.token\n    const reqObj = {\n      method: \"GET\",\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }\n    return fetch(\"http://localhost:3000/api/v1/current_user\", reqObj)\n      .then(res => res.json())\n      .then(data => {\n        if (data.error) {\n          console.log(\"currentUser error: \", data)\n        } else {\n          dispatch(loginUser(data.user))\n        }\n      })\n      .catch(err => console.log(err))\n  }\n}\n\nexport function addNewUser(newUser) {\n  return {\n    type: \"ADD_NEW_USER\",\n    newUser\n  }\n}\n\n// ! Creates a new User\nexport function registerUser(formData, history) {\n  return dispatch => {\n    const reqObj = {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(formData)\n    }\n    return fetch(fetchUsersUrl, reqObj)\n      .then(resp => resp.json())\n      .then(data => {\n        if (data.error) {\n          console.log(data.error)\n        } else {\n          localStorage.token = data.jwt\n          dispatch(loginUser(data.user))\n          dispatch(addNewUser(data.user))\n          dispatch(setDisplayUser(data.user))\n          history.push(`/profile/${data.user.id}`)\n          // ! Quick fix\n          // history.push(`/feed`)\n        }\n      })\n      .catch(err => console.log(err))\n  }\n}\n\nexport function updateUser(user) {\n  return {\n    type: \"UPDATE_USER\",\n    user\n  }\n}\n\n// ! Updates CurrentUser\nexport function updateCurrentUser(user, formData, history) {\n  return dispatch => {\n    const token = localStorage.token\n    const fetchUpdateUserUrl = fetchUsersUrl + \"/\" + user.id\n    const reqUpdObj = {\n      method: \"PATCH\",\n      headers: {\n        \"Content-type\": \"application/json\",\n        Accepts: \"application/json\",\n        Authorization: `Bearer ${token}`\n      },\n      body: JSON.stringify(formData)\n    }\n    console.log(formData)\n    const result = confirm(\"Are you sure you want to edit?\")\n    if (result) {\n      return fetch(fetchUpdateUserUrl, reqUpdObj)\n        .then(res => res.json())\n        .then(user => {\n          console.log(user)\n          if (!user.error) {\n            dispatch(updateUser(user))\n            history.push(`/profile/${user.id}`)\n          } else {\n            alert(\"Invalid Shiz\")\n          }\n        })\n    }\n  }\n}\n\n// ! Get and Set all USERS\nexport function setAllUsers(allUsers) {\n  return {\n    type: \"SET_ALL_USERS\",\n    allUsers\n  }\n}\n\nexport function fetchAllUsers() {\n  return dispatch => {\n    return fetch(fetchUsersUrl)\n      .then(resp => resp.json())\n      .then(data => {\n        // console.log(data)\n        if (data.error) {\n          console.log(data.error)\n        } else {\n          dispatch(setAllUsers(data))\n        }\n      })\n      .catch(err => console.log(err))\n  }\n}\n\n// ! Get and Set all SONGS\nexport function setAllSongs(allSongs) {\n  return {\n    type: \"SET_ALL_SONGS\",\n    allSongs\n  }\n}\n\nexport function fetchAllSongs() {\n  return dispatch => {\n    return fetch(fetchSongsUrl)\n      .then(resp => resp.json())\n      .then(data => {\n        if (data.error) {\n          console.log(data.error)\n        } else {\n          dispatch(setAllSongs(data))\n        }\n      })\n      .catch(err => console.log(err))\n  }\n}\n\n// ! Adds new song to allSongs Array\nexport function addNewSongToFeed(newSong) {\n  return {\n    type: \"ADD_SONG_TO_FEED\",\n    newSong\n  }\n}\n\n// ! POST New Song\nexport function postNewSong(formData, user_id, history) {\n  return dispatch => {\n    console.log(\"post da new song bruh\", formData)\n    const { title, genre, description, song_link, selectedTags } = formData\n    let songData = new FormData()\n    songData.append(\"song[song_link]\", song_link)\n    songData.append(\"song[title]\", title)\n    songData.append(\"song[genre]\", genre)\n    songData.append(\"song[description]\", description)\n    songData.append(\"song[user_id]\", user_id)\n    songData.append(\"tags[tags]\", selectedTags)\n    const reqObjPostSong = {\n      method: \"POST\",\n      headers: {\n        Accepts: \"application/json\"\n      },\n      body: songData\n    }\n    return fetch(fetchSongsUrl, reqObjPostSong)\n      .then(res => res.json())\n      .then(data => {\n        if (data.error) {\n          console.log(\"error: \", data.error)\n        } else {\n          dispatch(addNewSongToFeed(data))\n          dispatch(setDisplaySong(data))\n          history.push(`/songs/${data.song.id}`)\n        }\n      })\n      .catch(err => console.log(err))\n  }\n}\n\n// ! Find and Set Display User\nexport function setDisplayUser(displayUser) {\n  return {\n    type: \"SET_DISPLAY_USER\",\n    displayUser\n  }\n}\n\nexport function findDisplayUser(allUsers, history) {\n  return dispatch => {\n    const displayUserID = Number(history.location.pathname.slice(9))\n    const displayUser = allUsers.find(u => {\n      return u.id === displayUserID\n    })\n    dispatch(setDisplayUser(displayUser))\n  }\n}\n\nexport function findDisplayUserThroughSong(allUsers, displaySong) {\n  return dispatch => {\n    const displayUserID = Number(displaySong.song.user.id)\n    const displayUser = allUsers.find(u => {\n      return u.id === displayUserID\n    })\n    dispatch(setDisplayUser(displayUser))\n  }\n}\n\n// ! Find and Set Display Song\nexport function setDisplaySong(displaySong) {\n  return {\n    type: \"SET_DISPLAY_SONG\",\n    displaySong\n  }\n}\n\nexport function findDisplaySong(allSongs, history) {\n  return dispatch => {\n    const displaySongID = Number(history.location.pathname.slice(7))\n    const displaySong = allSongs.find(song => {\n      return song.song.id === displaySongID\n    })\n    // console.log(\"displaySong: \", displaySong)\n    dispatch(setDisplaySong(displaySong))\n  }\n}\n\n// ! Set All comments\nexport function setAllComments(allComments) {\n  return {\n    type: \"SET_ALL_COMMENTS\",\n    allComments\n  }\n}\n\n// ! GET fetchs all Comments\nexport function fetchAllComments() {\n  return dispatch => {\n    return fetch(fetchCommentsUrl)\n      .then(res => res.json())\n      .then(data => {\n        if (data.error) {\n          console.log(data.error)\n        } else {\n          dispatch(setAllComments(data))\n        }\n      })\n      .catch(err => console.log(err))\n  }\n}\n\n// ! GET All display Comments\nexport function findDisplayComments(allComments, displaySong) {\n  return dispatch => {\n    const displayComments = allComments.filter(comment => {\n      return comment.song_id === displaySong.song.id\n    })\n    dispatch(setDisplayComments(displayComments))\n  }\n}\n\n// ! Set all display comments\nexport function setDisplayComments(displayComments) {\n  return {\n    type: \"SET_DISPLAY_COMMENTS\",\n    displayComments\n  }\n}\n\n// ! Add New Comment to displayComments Array in store\nexport function addNewComment(comment) {\n  return {\n    type: \"ADD_NEW_COMMENT\",\n    comment\n  }\n}\n\n// ! POST New Comment\nexport function postNewComment(content, user_id, song_id) {\n  return dispatch => {\n    const reqObj = {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        content,\n        user_id,\n        song_id\n      })\n    }\n    return fetch(fetchCommentsUrl, reqObj)\n      .then(resp => resp.json())\n      .then(data => {\n        if (data.error) {\n          console.log(data.error)\n        } else {\n          console.log(data)\n          dispatch(addNewComment(data))\n        }\n      })\n      .catch(err => console.log(err))\n  }\n}\n\nexport function deleteComment(comment_id) {\n  return {\n    type: \"DELETE_COMMENT\",\n    comment_id\n  }\n}\n\n// ! Delete Comment\nexport function deleteCommentFromBackend(comment_id) {\n  return dispatch => {\n    const reqDelObj = {\n      method: \"DELETE\"\n    }\n    let result = confirm(\"Do you want to delete this comment?\")\n    if (result) {\n      return fetch(`${fetchCommentsUrl}/${comment_id}`, reqDelObj)\n        .then(res => res.json())\n        .then(data => {\n          console.log(data)\n          if (data.error) {\n            // handle error\n          } else {\n            alert(data.message)\n            dispatch(deleteComment(comment_id))\n          }\n        })\n        .catch(err => console.log(err))\n    }\n  }\n}\n\n// ! SET all Tags\nexport function setAllTags(allTags) {\n  return {\n    type: \"SET_ALL_TAGS\",\n    allTags\n  }\n}\n\n// ! GET all Tags\nexport function fetchAllTags() {\n  return dispatch => {\n    return fetch(fetchTagsUrl)\n      .then(res => res.json())\n      .then(data => {\n        if (data.error) {\n          console.log(data.error)\n        } else {\n          dispatch(setAllTags(data))\n        }\n      })\n      .catch(err => console.log(err))\n  }\n}\n// ? Some sort of filter songs by tag?\n\n// ! Goes to userProfile\nexport function goToUserProfile(user_id, history) {\n  return dispatch => {\n    return history.push(`/profile/${user_id}`)\n  }\n}\n\n// ! Sets all passive relationships\nexport function createFollowersArray(allUsers, currentUser) {\n  return dispatch => {\n    let followersIDArray = []\n    let followersArray = []\n    // console.log(allUsers, currentUser)\n    if (!!currentUser.passive_relationships) {\n      followersIDArray = currentUser.passive_relationships.map(\n        rel => rel.follower_id\n      )\n      followersArray = followersIDArray.map(followersID => {\n        return allUsers.find(user => {\n          return user.id === followersID\n        })\n      })\n      console.log(\"followers: \", followersIDArray, followersArray)\n      dispatch(setAllFollowers(followersArray))\n    }\n  }\n}\n\nexport function setAllFollowers(followers) {\n  return {\n    type: \"SET_ALL_FOLLOWERS\",\n    followers\n  }\n}\n\n// ! Sets all active relationships\nexport function createFollowedsArray(allUsers, currentUser) {\n  return dispatch => {\n    let followedsIDArray = []\n    let followedsArray = []\n    if (!!currentUser.passive_relationships) {\n      followedsIDArray = currentUser.active_relationships.map(\n        rel => rel.followed_id\n      )\n      followedsArray = followedsIDArray.map(followedsID => {\n        return allUsers.find(user => {\n          return user.id === followedsID\n        })\n      })\n      console.log(\"followed: \", followedsIDArray, followedsArray)\n      dispatch(setAllFolloweds(followedsArray))\n    }\n  }\n}\n\n// ! Sets all following relationships\nexport function setAllFolloweds(followeds) {\n  return {\n    type: \"SET_ALL_FOLLOWEDS\",\n    followeds\n  }\n}\n\n// ! Add new relationship to array\nexport function addFollowedUser() {}\n\n// ! Should update the followeds array in the store\nexport function followUser(followed, follower_id) {\n  return dispatch => {\n    const token = localStorage.token\n    const reqPostObj = {\n      method: \"POST\",\n      headers: {\n        \"Content-type\": \"application/json\",\n        Accepts: \"application/json\",\n        Authorization: `Bearer ${token}`\n      },\n      body: JSON.stringify({\n        follower_id: follower_id,\n        followed_id: followed.id\n      })\n    }\n    return fetch(fetchFollowingsUrl, reqPostObj)\n      .then(res => res.json())\n      .then(data => {\n        console.log(data)\n        if (data.error) {\n          // console.log(data.error)\n        } else {\n          alert(`You've followed ${followed.username}`)\n          // dispatch(addFollowedUser(data))\n        }\n      })\n      .catch(err => console.log(err))\n  }\n}\n\n// ! Remove active relationship\nexport function unfollowUser(relationship_id, displayUser) {\n  return dispatch => {\n    const token = localStorage.token\n    const reqDelObj = {\n      method: \"DELETE\",\n      headers: { Authorization: `Bearer ${token}` }\n    }\n    let result = confirm(\n      `Are you sure you want to unfollow ${displayUser.username}?`\n    )\n    if (result) {\n      return fetch(`${fetchFollowingsUrl}/${relationship_id}`, reqDelObj)\n        .then(res => res.json())\n        .then(data => {\n          if (!data.error) {\n            dispatch(removeFollowedUser())\n          }\n        })\n        .catch(err => console.log(err))\n    }\n  }\n}\n\nexport function removeFollowedUser() {}\n\nexport function currentRelationship(relationship) {\n  return {\n    type: \"CURRENT_RELATIONSHIP\",\n    relationship\n  }\n}\n\nexport function isCurrentUser(isCurrentUser) {\n  return {\n    type: \"IS_CURRENT_USER\",\n    isCurrentUser\n  }\n}\n\nexport function setCurrentUser(displayUser, user) {\n  return dispatch => {\n    const userCheck = displayUser.id === user.id\n    if (userCheck) {\n      dispatch(isCurrentUser(true))\n    } else {\n      dispatch(isCurrentUser(false))\n    }\n  }\n}\n\n// ! DELETE Song\nexport function removeSong(song_id) {\n  return {\n    type: \"REMOVE_SONG_FROM_FEED\",\n    song_id\n  }\n}\n\nexport function deleteSong(song_id, history) {\n  return dispatch => {\n    const reqDelObj = {\n      method: \"DELETE\"\n    }\n    let result = confirm(\"Do you want to delete this song?\")\n    if (result) {\n      return fetch(`${fetchSongsUrl}/${song_id}`, reqDelObj)\n        .then(res => res.json())\n        .then(data => {\n          console.log(data)\n          if (data.error) {\n            // handle error\n          } else {\n            alert(data.message)\n            dispatch(removeSong(song_id))\n            history.push(\"/feed\")\n          }\n        })\n        .catch(err => console.log(err))\n    }\n  }\n}\n\n// ! DELETE User\nexport function removeUser(user_id) {\n  return {\n    type: \"REMOVE_USER\",\n    user_id\n  }\n}\n\nexport function deleteUser(user_id, history) {\n  return dispatch => {\n    const token = localStorage.token\n    const reqDelObj = {\n      method: \"DELETE\",\n      headers: {\"Authorization\": `Bearer ${token}`}\n    }\n    let result = confirm(\"Are you sure you want to delete your account??\")\n    if (result) {\n      return fetch(`${fetchUsersUrl}/${user_id}`, reqDelObj)\n        .then(res => res.json())\n        .then(data => {\n          console.log(data)\n          if (data.error) {\n            // handle error\n            alert(data.error)\n          } else {\n            alert(data.message)\n            dispatch(removeUser(user_id))\n            history.push(\"/login\")\n          }\n        })\n        .catch(err => console.log(err))\n    }\n  }\n}"]},"metadata":{},"sourceType":"module"}